<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1"><!-- Begin Jekyll SEO tag v2.8.0 -->
<title>Java 11 Fundamentals: Collections | Shubhamâ€™s Digital GardenðŸª´</title>
<meta name="generator" content="Jekyll v4.2.2" />
<meta property="og:title" content="Java 11 Fundamentals: Collections" />
<meta name="author" content="Shubham" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Every application requires wide variety of data structures based on your use case. Implementing every basic data structures yourself is error prone, itâ€™s hard to get everything right. This is one of the reasons why java provides collection with jdk." />
<meta property="og:description" content="Every application requires wide variety of data structures based on your use case. Implementing every basic data structures yourself is error prone, itâ€™s hard to get everything right. This is one of the reasons why java provides collection with jdk." />
<link rel="canonical" href="https://reflection.cf/2022/05/25/java-11-collections.html" />
<meta property="og:url" content="https://reflection.cf/2022/05/25/java-11-collections.html" />
<meta property="og:site_name" content="Shubhamâ€™s Digital GardenðŸª´" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2022-05-25T00:00:00+00:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Java 11 Fundamentals: Collections" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"Shubham"},"dateModified":"2022-05-25T00:00:00+00:00","datePublished":"2022-05-25T00:00:00+00:00","description":"Every application requires wide variety of data structures based on your use case. Implementing every basic data structures yourself is error prone, itâ€™s hard to get everything right. This is one of the reasons why java provides collection with jdk.","headline":"Java 11 Fundamentals: Collections","mainEntityOfPage":{"@type":"WebPage","@id":"https://reflection.cf/2022/05/25/java-11-collections.html"},"url":"https://reflection.cf/2022/05/25/java-11-collections.html"}</script>
<!-- End Jekyll SEO tag -->
<link rel="stylesheet" href="/assets/main.css"><link type="application/atom+xml" rel="alternate" href="https://reflection.cf/feed.xml" title="Shubham's Digital GardenðŸª´" /><!-- for mathjax support -->
  
    <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
  
</head>
<body><header class="site-header" role="banner">

  <div class="wrapper"><a class="site-title" rel="author" href="/">Shubham&#39;s Digital GardenðŸª´</a><nav class="site-nav">
        <input type="checkbox" id="nav-trigger" class="nav-trigger" />
        <label for="nav-trigger">
          <span class="menu-icon">
            <svg viewBox="0 0 18 15" width="18px" height="15px">
              <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"/>
            </svg>
          </span>
        </label>

        <div class="trigger"><a class="page-link" href="/about/">About</a><a class="page-link" href="/tags/">tags</a></div>
      </nav></div>
</header>
<main class="page-content" aria-label="Content">
      <div class="wrapper">
        <article class="post h-entry" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="post-header">
    <h1 class="post-title p-name" itemprop="name headline">Java 11 Fundamentals: Collections</h1>
    <p class="post-meta">
      <time class="dt-published" datetime="2022-05-25T00:00:00+00:00" itemprop="datePublished">May 25, 2022
      </time></p>
  </header>

  <div class="post-content e-content" itemprop="articleBody">
    <p>Every application requires wide variety of data structures based on your use case. Implementing every basic data structures yourself is error prone, itâ€™s hard to get everything right. This is one of the reasons why java provides <a href="https://docs.oracle.com/en/java/javase/18/docs/api/java.base/java/util/Collection.html">collection</a> with jdk.</p>

<h2 id="the-array-problem">The Array Problem</h2>
<p>Some may argue why not use array everywhere? 
Yes, you can but is it worth it?</p>

<p>Given below are some problems associated with array:</p>
<ul>
  <li>Increasing size - Adding new elements in already filled array requires creating new array and copying values from old one. Old array is left for garbage collection, resulting in memory wastage.</li>
  <li>Homogeneous object storage - You can only store objects of same type in an array.</li>
  <li>Deletion &amp; Insertion - You cannot easily insert or delete elements at middle of the array.</li>
</ul>

<p>Apart from the issues above, the complexity is also very bad for frequently used operations in array.</p>

<table>
  <thead>
    <tr>
      <th style="text-align: center">Array Operation</th>
      <th style="text-align: center">Real Time Complexity</th>
      <th style="text-align: center">Assumed Time Complexity</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: center">Access i-th element</td>
      <td style="text-align: center">O(\(\sqrt{N}\))</td>
      <td style="text-align: center">O(1)</td>
    </tr>
    <tr>
      <td style="text-align: center">Traverse all elements</td>
      <td style="text-align: center">O(N + \(\sqrt{N}\))</td>
      <td style="text-align: center">O(N)</td>
    </tr>
    <tr>
      <td style="text-align: center">Override element at i-th index</td>
      <td style="text-align: center">O(\(\sqrt{N}\))</td>
      <td style="text-align: center">O(1)</td>
    </tr>
    <tr>
      <td style="text-align: center">Insert element E</td>
      <td style="text-align: center">O(N + \(\sqrt{N}\))</td>
      <td style="text-align: center">O(N)</td>
    </tr>
    <tr>
      <td style="text-align: center">Delete element E</td>
      <td style="text-align: center">O(N + \(\sqrt{N}\))</td>
      <td style="text-align: center">O(N)</td>
    </tr>
  </tbody>
</table>

<h2 id="collection-design">Collection Design</h2>
<p><img src="/assets/images/java-11-collections/collections.excalidraw.png" alt="Collections" /></p>

<h2 id="choosing-collection">Choosing Collection</h2>
<p><img src="/assets/images/java-11-collections/which_collection.excalidraw.png" alt="Which Collection" /></p>

<h2 id="collection-behaviors">Collection Behaviors</h2>
<p>Collection interface extends iterable interface which allows creating iterator object. Iterator objects can be used to loop over collections.</p>

<p><img src="/assets/images/java-11-collections/iterable.excalidraw.png" alt="Iterable" /></p>

<p>Sample code snippet showing iterator usage provided below:</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Make a collection</span>
<span class="nc">List</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">&gt;</span> <span class="n">movies</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">ArrayList</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">&gt;();</span>
<span class="n">movies</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="s">"Matrix"</span><span class="o">);</span>
<span class="n">movies</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="s">"Spiderman"</span><span class="o">);</span>
<span class="n">movies</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="s">"Batman"</span><span class="o">);</span>

<span class="c1">// Get iterator</span>
<span class="nc">Iterator</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">&gt;</span> <span class="n">it</span> <span class="o">=</span> <span class="n">movies</span><span class="o">.</span><span class="na">iterator</span><span class="o">();</span>

<span class="c1">// Looping through collection</span>
<span class="k">while</span><span class="o">(</span><span class="n">it</span><span class="o">.</span><span class="na">hasNext</span><span class="o">())</span> <span class="o">{</span>
	<span class="c1">// process collection elements</span>
	<span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">it</span><span class="o">.</span><span class="na">next</span><span class="o">());</span>
<span class="o">}</span>

</code></pre></div></div>

<h2 id="lists">Lists</h2>
<p>Lists are collection of elements having defined iteration order where each element has an index.</p>

<h3 id="arraylist">ArrayList</h3>

<p>Arraylist uses dynamic array for storing objects. It is good for general purpose implementation and can be used as default implementation in most cases. Arraylist is also CPU cache sympathetic because of the way it is stored in-memory. Initial ArrayList starts with default capacity and creates a new array with double the current capacity once it is full while copies elements from old array. ArrayList grows using doubling strategy as shown in figure below.</p>

<p><img src="/assets/images/java-11-collections/arraylist_doubling.excalidraw.png" alt="ArrayList Doubling" /></p>

<h3 id="linkedlist">LinkedList</h3>

<p>LinkedList has same implementation as doubly linked list and uses pointers to traverse across the data structure. Use linkedlist when there are very frequent addition/removal of elements at start. For most cases linkedlists will have worse performance than arraylist.</p>

<p><img src="/assets/images/java-11-collections/doubly-linked-list.excalidraw.png" alt="Doubly Linked List" /></p>

<h3 id="performance-comparison">Performance Comparison</h3>

<table>
  <thead>
    <tr>
      <th style="text-align: center">Â </th>
      <th style="text-align: center">get</th>
      <th style="text-align: center">add</th>
      <th style="text-align: center">contains</th>
      <th style="text-align: center">next</th>
      <th style="text-align: center">remove</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: center">ArrayList</td>
      <td style="text-align: center">O(1)</td>
      <td style="text-align: center">O(N), Î©(1)</td>
      <td style="text-align: center">O(N)</td>
      <td style="text-align: center">O(1)</td>
      <td style="text-align: center">O(N)</td>
    </tr>
    <tr>
      <td style="text-align: center">LinkedList</td>
      <td style="text-align: center">O(N)</td>
      <td style="text-align: center">O(1)</td>
      <td style="text-align: center">O(N)</td>
      <td style="text-align: center">O(1)</td>
      <td style="text-align: center">O(N)</td>
    </tr>
  </tbody>
</table>

<h2 id="maps">Maps</h2>
<p>Maps are collections of pairs, they have keys and values. Dictionary is a good example of map, where you find meaning of word by using word as key. In java maps, keys are unique, and the uniqueness is defined by keys equals/hashcode method. Use maps over other data structures when doing frequent lookups.</p>

<h3 id="hashmap">HashMap</h3>

<p>HashMap is a good general purpose implementation for most usecases. Hashmap uses a <code class="language-plaintext highlighter-rouge">.hashcode()</code> function to generate hash values for a key. The generated hashcodes are stored in an array of buckets. Buckets are linked lists to accomodate for hash collisions. Elements are stored in <code class="language-plaintext highlighter-rouge">hash % bucket_count</code> bucket.  Buckets can also be trees in some cases. Number of buckets can increase with more elements and a rehash of all keys happens during this expansion of hashmaps.</p>

<p><img src="/assets/images/java-11-collections/hashmap.excalidraw.png" alt="Hashmap" /></p>

<h3 id="treemap">TreeMap</h3>

<p>TreeMap defines sort order and adds functionality. You can look at subsections of map based on sort order. This can perform better for some specific usecases. Underlying implementation of TreeMap is a red/black tree(a balanced binary tree). Elements with lower value are stored on left branch of these trees &amp; higher values are stored in right branch. The tree gets re-balanced, so it never goes longer than <strong>\(\log_{2}N\)</strong> in terms of depth, where N is the number of elements. In general treemaps are slower than hashmaps, because of too many pointer operations, but treemap provides the navigation and sorting functionality which is missing in hashmaps.</p>

<p>Following example shows world population stored in treemap, it is easy to find cities with population in specific range, max population city, min population city, etc.</p>

<p><img src="/assets/images/java-11-collections/treemap.excalidraw.png" alt="Treemap" /></p>

<p>JDK also has other implementations of Map as well like EnumMap, LinkedHashMap &amp; IdentityHashMap. Read official docs to know more in-depth.</p>

<h3 id="performance-comparison-1">Performance Comparison</h3>
<p>|         |    put     |    get     | containsKey |     next      |
|:â€”â€”-:|:â€”â€”â€”-:|:â€”â€”â€”-:|:â€”â€”â€”â€“:|:â€”â€”â€”â€”-:|
| HashMap | O(N), Î©(1) | O(N), Î©(1) | O(N), Î©(1)  | O(Capacity/N) |
| TreeMap | O(log(N))  | O(log(N))  |  O(log(N))  |   O(log(N))   |</p>

<h2 id="sets">Sets</h2>

<p>Sets are collections with uniqueness as fundamental property. When <code class="language-plaintext highlighter-rouge">equals</code> method on two objects return same value, they are considered equal. Sets have no two objects within them with same equals value. Implementation of <code class="language-plaintext highlighter-rouge">equals</code> may require implementing <code class="language-plaintext highlighter-rouge">hashcode</code> or <code class="language-plaintext highlighter-rouge">comparator</code>.</p>

<h3 id="hashcode--equals-contract">HashCode / Equals Contract</h3>

<p>Many APIs within JDK have contracts between them.  Contracts are assumptions being made by any class within JDK and there are obligations on your code that you need to meet in order for that class functionality to work.</p>

<p>Since HashMap/HashSet depend on <code class="language-plaintext highlighter-rouge">hashCode</code> to find slots in bucket and <code class="language-plaintext highlighter-rouge">equals</code> to compare if two values is equal. If a developer doesnâ€™t properly define this functions there is a possibility of you getting in a situation with duplicate objects within set or same object present in different buckets in hashmap. If there are 2 objects <code class="language-plaintext highlighter-rouge">object1</code> and <code class="language-plaintext highlighter-rouge">object2</code>, the hashcode/equals contract is as follows:</p>

<p><code class="language-plaintext highlighter-rouge">object1.equals(object2)</code> \(\implies\) <code class="language-plaintext highlighter-rouge">object1.hashCode() == object2.hashCode()</code></p>

<p>This is one way implication, 2 different object can have same hashCode, but same objects should always have same hashCode. Violating this contract will break the functionality of your class.</p>

<p>This contract is important because java has 2 types of equality - reference based and value based. Reference based just needs to inherit equals from Object. Value based requires a custom equals method. For value based equality proper equals &amp; hashcode implementation should be defined.</p>

<p>Java 8+ have <code class="language-plaintext highlighter-rouge">hashCode()</code> for almost all primitives. Modern IDEs can auto-generate hashCode imeplementation for you. Java 7+ also has <code class="language-plaintext highlighter-rouge">Objects.hash()</code> that generates hashcode by combining individuals fields inside an object, but this function has high performance overhead, so, avoid using it.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Arrays</span>
<span class="nc">Arrays</span><span class="o">.</span><span class="na">hashCode</span><span class="o">();</span>

<span class="c1">// Primitives (Java 8+)</span>
<span class="nc">Long</span><span class="o">.</span><span class="na">hashCode</span><span class="o">(</span><span class="n">longValue</span><span class="o">);</span>

<span class="c1">// Old Primitives (&lt; Java 8)</span>
<span class="o">(</span><span class="kt">int</span><span class="o">)</span> <span class="o">(</span><span class="n">l</span> <span class="o">^</span> <span class="o">(</span><span class="n">l</span> <span class="o">&gt;&gt;&gt;</span> <span class="mi">32</span><span class="o">))</span> <span class="c1">// long l</span>
<span class="nc">Float</span><span class="o">.</span><span class="na">floatToIntBits</span><span class="o">(</span><span class="n">f</span><span class="o">);</span> <span class="c1">// float f</span>
</code></pre></div></div>

<h3 id="hashset">HashSet</h3>

<p>HashSet is based upon HashMap and uses the HashMap implementation. HashSet is a HashMap with bucket size of 1. HashSet is good for general purpose and should be used by default.</p>

<h3 id="treeset">TreeSet</h3>

<p>TreeSet is based upon TreeMap and uses the TreeMap implementation(red/black binary tree), it provides features for searching and navigation within set. TreeSet is TreeMap without any duplicate nodes in tree.</p>

<h2 id="streams">Streams</h2>

<p><a href="https://docs.oracle.com/en/java/javase/18/docs/api/java.base/java/util/stream/package-summary.html">Streams</a> are powerful new abstractions introduced in Java 8. Stream class provides functional-style operations on stream of elements, such as map-reduce transformations on collections. I would recommend using streams to do any kind of transformation in collections instead of traditional loops. Using stream improves readability and reduces boilerplate code.</p>

<p>Example code snippet to show stream usage:</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// find sum of weights of red widgets</span>
<span class="kt">int</span> <span class="n">sum</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="na">stream</span><span class="o">()</span>
	<span class="o">.</span><span class="na">filter</span><span class="o">(</span><span class="n">b</span> <span class="o">-&gt;</span> <span class="n">b</span><span class="o">.</span><span class="na">getColor</span><span class="o">()</span> <span class="o">==</span> <span class="no">RED</span><span class="o">)</span>
	<span class="o">.</span><span class="na">mapToInt</span><span class="o">(</span><span class="n">b</span> <span class="o">-&gt;</span> <span class="n">b</span><span class="o">.</span><span class="na">getWeight</span><span class="o">())</span>
	<span class="o">.</span><span class="na">sum</span><span class="o">();</span>
</code></pre></div></div>

<p>Streams are usually used with collectors. I would recommend reading <a href="https://docs.oracle.com/en/java/javase/18/docs/api/java.base/java/util/stream/Collectors.html">Collectors</a> documentation for examples.</p>

<p>Example code snippet to show collector usage:</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Accumulate names into a List</span>
<span class="nc">List</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">&gt;</span> <span class="n">list</span> <span class="o">=</span> <span class="n">people</span><span class="o">.</span><span class="na">stream</span><span class="o">()</span>
	<span class="o">.</span><span class="na">map</span><span class="o">(</span><span class="nl">Person:</span><span class="o">:</span><span class="n">getName</span><span class="o">)</span>
	<span class="o">.</span><span class="na">collect</span><span class="o">(</span><span class="nc">Collectors</span><span class="o">.</span><span class="na">toList</span><span class="o">());</span>
</code></pre></div></div>

<h2 id="factory-methods">Factory Methods</h2>
<p><a href="https://docs.oracle.com/en/java/javase/18/docs/api/java.base/java/util/Collections.html">Collections</a> class provides many utility methods which can help prevent redundant implementation of commonly used functionality like, find min &amp; max from list, create empty set, etc. Most factory methods are optimized for performance, as they have generic implementation details.</p>

<p>Having empty collections can be useful when you want to pass an empty collection as argument, or you want to return an empty collection from a function.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Empty Collections</span>
<span class="nc">List</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">&gt;</span> <span class="n">list</span> <span class="o">=</span> <span class="nc">Collections</span><span class="o">.</span><span class="na">emptyList</span><span class="o">();</span>
<span class="nc">Map</span><span class="o">&lt;</span><span class="nc">Integer</span><span class="o">,</span> <span class="nc">String</span><span class="o">&gt;</span> <span class="n">map</span> <span class="o">=</span> <span class="nc">Collections</span><span class="o">.</span><span class="na">emptyMap</span><span class="o">();</span>
<span class="nc">Set</span><span class="o">&lt;</span><span class="nc">Integer</span><span class="o">&gt;</span> <span class="n">set</span> <span class="o">=</span> <span class="nc">Collections</span><span class="o">.</span><span class="na">emptySet</span><span class="o">();</span>
</code></pre></div></div>

<p>Singletons are helpful when you want to create collections with single value.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Singletons</span>
<span class="nc">List</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">&gt;</span> <span class="n">list</span> <span class="o">=</span> <span class="nc">Collections</span><span class="o">.</span><span class="na">singletonList</span><span class="o">(</span><span class="s">"one"</span><span class="o">);</span>
<span class="nc">Mao</span><span class="o">&lt;</span><span class="nc">Integer</span><span class="o">,</span> <span class="nc">String</span><span class="o">&gt;</span> <span class="n">map</span> <span class="o">=</span> <span class="nc">Collections</span><span class="o">.</span><span class="na">singletonMap</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="s">"one"</span><span class="o">);</span>
<span class="nc">Set</span><span class="o">&lt;</span><span class="nc">Integer</span><span class="o">&gt;</span> <span class="n">set</span> <span class="o">=</span> <span class="nc">Collections</span><span class="o">.</span><span class="na">singleton</span><span class="o">(</span><span class="mi">1</span><span class="o">);</span>
</code></pre></div></div>

<p>Collection factories allow creating collections without a lot of boilerplate code.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nc">List</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">&gt;</span> <span class="n">list</span> <span class="o">=</span> <span class="nc">List</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="s">"India"</span><span class="o">,</span> <span class="s">"USA"</span><span class="o">);</span>
<span class="nc">Map</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">,</span> <span class="nc">Integer</span><span class="o">&gt;</span> <span class="n">map</span> <span class="o">=</span> <span class="nc">Map</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="s">"Shubham"</span><span class="o">,</span> <span class="mi">1000</span><span class="o">,</span> <span class="s">"Alex"</span><span class="o">,</span> <span class="mi">5000</span><span class="o">);</span>
<span class="nc">Map</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">,</span> <span class="nc">Integer</span><span class="o">&gt;</span> <span class="n">entries</span> <span class="o">=</span> <span class="nc">Map</span><span class="o">.</span><span class="na">ofEntries</span><span class="o">(</span>
	<span class="nc">Map</span><span class="o">.</span><span class="na">entry</span><span class="o">(</span><span class="s">"Shubham"</span><span class="o">,</span> <span class="mi">1000</span><span class="o">),</span>
	<span class="nc">Map</span><span class="o">.</span><span class="na">entry</span><span class="o">(</span><span class="s">"Alex"</span><span class="o">,</span> <span class="mi">5000</span><span class="o">)</span>
<span class="o">);</span>
</code></pre></div></div>

<p>Java 10 introduced immutable copies approach as an alternative to immutable factory methods.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Modifying names does not modify immutableNames</span>
<span class="nc">Collection</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">&gt;</span> <span class="n">names</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">ArrayList</span><span class="o">();</span>
<span class="n">names</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="s">"Shubham"</span><span class="o">);</span>
<span class="n">names</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="s">"Alex"</span><span class="o">);</span>

<span class="c1">// add/remove/updated prohibited</span>
<span class="nc">List</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">&gt;</span> <span class="n">immutableNames</span> <span class="o">=</span> <span class="nc">List</span><span class="o">.</span><span class="na">copyOf</span><span class="o">(</span><span class="n">names</span><span class="o">);</span>

<span class="nc">Map</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">,</span> <span class="nc">Integer</span><span class="o">&gt;</span> <span class="n">budget</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">HashMap</span><span class="o">&lt;&gt;();</span>
<span class="n">budget</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"Shubham"</span><span class="o">,</span> <span class="mi">1000</span><span class="o">);</span>
<span class="n">budget</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"Alex"</span><span class="o">,</span> <span class="mi">5000</span><span class="o">);</span>

<span class="c1">// add/remove/updated prohibited</span>
<span class="nc">Map</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">,</span> <span class="nc">Integer</span><span class="o">&gt;</span> <span class="n">immutableBudget</span> <span class="o">=</span> <span class="nc">Map</span><span class="o">.</span><span class="na">copyOf</span><span class="o">(</span><span class="n">budget</span><span class="o">);</span>
</code></pre></div></div>

<p>Java 9 introduced unmodifiable views.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Modifying names is the only way to modify namesView</span>
<span class="nc">List</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">&gt;</span> <span class="n">names</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">ArrayList</span><span class="o">&lt;&gt;();</span>
<span class="n">names</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="s">"Shubham"</span><span class="o">);</span>
<span class="n">names</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="s">"Alex"</span><span class="o">);</span>

<span class="c1">// add/remove/updated prohibited directly, still possible through names</span>
<span class="nc">List</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">&gt;</span> <span class="n">namesView</span> <span class="o">=</span> <span class="nc">Collections</span><span class="o">.</span><span class="na">unmodifiableList</span><span class="o">(</span><span class="n">names</span><span class="o">);</span>

<span class="nc">Map</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">,</span> <span class="nc">Integer</span><span class="o">&gt;</span> <span class="n">budget</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">HashMap</span><span class="o">&lt;&gt;();</span>
<span class="n">budget</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"Shubham"</span><span class="o">,</span> <span class="mi">1000</span><span class="o">);</span>
<span class="n">budget</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"Alex"</span><span class="o">,</span> <span class="mi">5000</span><span class="o">);</span>

<span class="c1">// add/remove/updated prohibited, still possible through budget</span>
<span class="nc">Map</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">,</span> <span class="nc">Integer</span><span class="o">&gt;</span> <span class="n">budgetView</span> <span class="o">=</span> <span class="nc">Collections</span><span class="o">.</span><span class="na">unmodifiableMap</span><span class="o">(</span><span class="n">budget</span><span class="o">);</span>
</code></pre></div></div>

<h2 id="conclusion">Conclusion</h2>
<p>This article should help you choose correct collection for your usecase and identify tradeoff between different collections. Donâ€™t forget to go through official docs for <a href="https://docs.oracle.com/en/java/javase/18/docs/api/java.base/java/util/Collection.html">Collection</a>, <a href="https://docs.oracle.com/en/java/javase/18/docs/api/java.base/java/util/List.html">List</a>, <a href="https://docs.oracle.com/en/java/javase/18/docs/api/java.base/java/util/Map.html">Map</a>, <a href="https://docs.oracle.com/en/java/javase/18/docs/api/java.base/java/util/Set.html">Set</a> and <a href="https://docs.oracle.com/en/java/javase/18/docs/api/java.base/java/util/Queue.html">Queue</a>.</p>

  </div><a class="u-url" href="/2022/05/25/java-11-collections.html" hidden></a>
</article>

      </div>
    </main><footer class="site-footer h-card">
  <data class="u-url" href="/"></data>

  <div class="wrapper">

    <h2 class="footer-heading">Shubham&#39;s Digital GardenðŸª´</h2>

    <div class="footer-col-wrapper">
      <div class="footer-col footer-col-1">
        <ul class="contact-list">
          <li class="p-name">Shubham</li><li><a class="u-email" href="mailto:shubham.null@gmail.com">shubham.null@gmail.com</a></li></ul>
      </div>

      <div class="footer-col footer-col-2"><ul class="social-media-list"><li><a href="https://github.com/prophet1906"><svg class="svg-icon"><use xlink:href="/assets/minima-social-icons.svg#github"></use></svg> <span class="username">prophet1906</span></a></li><li><a href="https://www.twitter.com/shubham_null"><svg class="svg-icon"><use xlink:href="/assets/minima-social-icons.svg#twitter"></use></svg> <span class="username">shubham_null</span></a></li></ul>
</div>

      <div class="footer-col footer-col-3">
        <p>Shubham&#39;s Digital Garden.</p>
      </div>
    </div>

  </div>

</footer>
</body>

</html>
